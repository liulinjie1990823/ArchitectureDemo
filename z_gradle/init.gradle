//限制只能在跟目录导入
if (project.name != project.rootProject.name) {
    return
}

println("Custome Configure (init.gradle)-------------------------------------")

//先加载根目录下的local.properties文件
Properties properties = new Properties()
try {
    //获取根目录下的local.properties文件
    def localFile = project.rootProject.file("local.properties")
    if (localFile != null && localFile.exists()) {
        properties.load(localFile.newDataInputStream())
    }
} catch (Exception ignored) {
    println("local.properties not found")
}


//将根目录下的local.properties文件的属性赋值给根project的ext属性
ext.applicationId = properties.getProperty("applicationId")

//蒲公英相关秘钥
ext.pgyDebugApiKey = properties.getProperty("pgyDebugApiKey")
ext.pgyDebugUserKey = properties.getProperty("pgyDebugUserKey")
ext.pgyDebugAppKey = properties.getProperty("pgyDebugAppKey")

ext.pgyBetaApiKey = properties.getProperty("pgyBetaApiKey")
ext.pgyBetaUserKey = properties.getProperty("pgyBetaUserKey")
ext.pgyBetaAppKey = properties.getProperty("pgyBetaAppKey")

ext.pgyReleaseApiKey = properties.getProperty("pgyReleaseApiKey")
ext.pgyReleaseUserKey = properties.getProperty("pgyReleaseUserKey")
ext.pgyReleaseAppKey = properties.getProperty("pgyReleaseAppKey")

ext.pgyUploadUrl = properties.getProperty("pgyUploadUrl")
ext.pgyBuildDesc = properties.getProperty("pgyLocalBuildDesc")

//钉钉token
ext.dingTalkDebugAccessToken = properties.getProperty("dingTalkDebugAccessToken")

//七牛秘钥
ext.kodoAccessKey = properties.getProperty("kodoAccessKey")
ext.kodoSecretKey = properties.getProperty("kodoSecretKey")

//分享相关
ext.qqId = properties.getProperty("qqId")
ext.wxId = properties.getProperty("wxId")
ext.wxSecret = properties.getProperty("wxSecret")
ext.sinaId = properties.getProperty("sinaId")
ext.sinaUrl = properties.getProperty("sinaUrl")
ext.buglyId = properties.getProperty("buglyId")

ext.usePluginDexcount = properties.getProperty("usePluginDexcount") == "true"
ext.usePluginAspectjx = properties.getProperty("usePluginAspectjx") == "true"
ext.usePluginCodeInject = properties.getProperty("usePluginCodeInject") == "true"
ext.usePluginApkUpload = properties.getProperty("usePluginApkUpload") == "true"
ext.usePluginDoraemonkit = properties.getProperty("usePluginDoraemonkit") == "true"
ext.usePluginMatrix = properties.getProperty("usePluginMatrix") == "true"
ext.usePluginMethodTrace = properties.getProperty("usePluginMethodTrace") == "true"
ext.usePluginOkbuck = properties.getProperty("usePluginOkbuck") == "true"
ext.usePluginAndroidDevMetrics = properties.getProperty("usePluginAndroidDevMetrics") == "true"


ext.useOld = properties.getProperty("useOld") == "true"
ext.useNew = properties.getProperty("useNew") == "true"
ext.useComponent = properties.getProperty("useComponent") == "true"
ext.useMaven = properties.getProperty("useMaven") == "true"
ext.useFlutterSrc = properties.getProperty("useFlutterSrc") == "true"
ext.useFlutterSrc = properties.getProperty("useFlutterSrc") == "true"
ext.useReactNative = properties.getProperty("useReactNative") == "true"
ext.enableHermes = properties.getProperty("enableHermes") == "false"

apply from: rootProject.file('z_gradle/componentEntrance.gradle')

//同步android机代理任务
task syncAndroidIp(type: Exec) {
    description '设置android端ip代理'
    group 'llj'
    workingDir "$rootProject.projectDir/z_python"
    commandLine './sync_android_ip.py'
    args '1'
}

//清除android手机代理
task deSyncAndroidIp(type: Exec) {
    description '重置android端ip代理'
    group 'llj'
    workingDir "$rootProject.projectDir/z_python"
    println workingDir
    commandLine './sync_android_ip.py'
    args '0'
}


//打包aar的脚本
task repoAar(type: Exec) {
    description '打包aar'
    group 'llj'
    workingDir "$rootProject.projectDir"
    commandLine 'python3', 'repo_aar.py'
}



