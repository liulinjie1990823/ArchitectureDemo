task zipChannels(type: Zip) {
    println 'zipChannels'
    from 'build/outputs/channels'    //需要打包的文件夹内容
    //into 'build/outputs/channels'  //zip包里面的的文件夹路径
    baseName "$project.name-channels"
    extension 'zip'
    destinationDir file("$buildDir/outputs")  //输出路径
}

//tasks.whenTaskAdded { task ->
//    println 'whenTaskAdded:' + task.name
//    if (task.name == 'zipChannels') {
//        task.dependsOn = assembleReleaseChannels
//    }
//}

tasks.whenTaskAdded { task ->
    if (task.name == 'assembleReleaseChannels') {
        task.finalizedBy(zipChannels)
    }
}


